@using Microsoft.AspNet.Identity;
@model Car_Sale_Web_Site.Models.PostCar

@{
    ViewBag.Title = "Details";
}
<link href="~/Content/images/css/lightbox.css" rel="stylesheet" />
<script src="~/Content/images/js/lightbox-plus-jquery.js"></script>
<h2>Details</h2>

@if (Model.Files.Any(f => f.FileType == Car_Sale_Web_Site.Models.FileType.Photo))
{
    {
        <span style="float:left">
            <dl class="dl-horizontal">
                <dt>
                    @Html.DisplayNameFor(model => model.Manufacturer)
                </dt>
                <dd>
                    @Html.DisplayFor(model => model.Manufacturer)
                </dd>
                <dt>
                    @Html.DisplayNameFor(model => model.CarModel)
                </dt>

                <dd>
                    @Html.DisplayFor(model => model.CarModel)
                </dd>

                <dt>
                    Year
                </dt>

                <dd>
                    @Html.DisplayFor(model => model.YearMin)
                </dd>


                <dt>
                    @Html.DisplayNameFor(model => model.Price)
                </dt>
                <dd style="width:150px">
                    @Html.DisplayFor(model => model.Price) £
                </dd>
                <dt>
                    @Html.DisplayNameFor(model => model.Town)
                </dt>
                <dd>
                    @Html.DisplayFor(model => model.Town)
                </dd>
                <dt>
                    @Html.DisplayNameFor(model => model.HorsePower)
                </dt>
                <dd>
                    @Html.DisplayFor(model => model.HorsePower) hp
                </dd>

            </dl>
        </span>
        @:&nbsp;
        @:&nbsp;
        @:&nbsp;
        @:&nbsp;
        @:&nbsp;
        @:&nbsp;
        @:&nbsp;
        @:&nbsp;
        @:&nbsp;
        <span>

            @for (int i = 0; i < Model.Files.Count(); i++)
            {
                <a href="~/File?id=@Model.Files.ElementAt(i).FileId" data-lightbox="cars"><img src="~/File?id=@Model.Files.ElementAt(i).FileId" alt="photo" width="160" height="100" /></a>
            }
        </span>
    }

}
else
{
    {
        <span style="float:left">
            <dl class="dl-horizontal">
                <dt>
                    @Html.DisplayNameFor(model => model.Manufacturer)
                </dt>
                <dd>
                    @Html.DisplayFor(model => model.Manufacturer)
                </dd>
                <dt>
                    @Html.DisplayNameFor(model => model.CarModel)
                </dt>

                <dd>
                    @Html.DisplayFor(model => model.CarModel)
                </dd>

                <dt>
                    Year
                </dt>

                <dd>
                    @Html.DisplayFor(model => model.YearMin)
                </dd>


                <dt>
                    @Html.DisplayNameFor(model => model.Price)
                </dt>
                <dd style="width:150px">
                    @Html.DisplayFor(model => model.Price) £
                </dd>
                <dt>
                    @Html.DisplayNameFor(model => model.Town)
                </dt>
                <dd>
                    @Html.DisplayFor(model => model.Town)
                </dd>
                <dt>
                    @Html.DisplayNameFor(model => model.HorsePower)
                </dt>
                <dd>
                    @Html.DisplayFor(model => model.HorsePower) hp
                </dd>
            </dl>
        </span>
        @:&nbsp;
        @:&nbsp;
        @:&nbsp;
        @:&nbsp;
        @:&nbsp;
        @:&nbsp;
        @:&nbsp;
        @:&nbsp;
        @:&nbsp;
        <span>
            <img src="~/fonts/noImage.png" alt="photo" width="160" height="100" />
        </span>
    }
}
<div>
    <hr />

    <dl class="dl-horizontal">

        <span style="float:left; width:350px">
            <dt>
                Number of doors
            </dt>

            <dd>@Model.DoorId </dd>
        </span>

        <span style="float:left; width:350px;margin-left:45px ">
            <dt>
                Transmission
            </dt>
            <dd>@Model.GearId</dd>
        </span>

        <span style="float:left; width:350px;margin-left:45px  ">
            <dt>
                Car type
            </dt>
            <dd>@Model.CategoryId</dd>
        </span>

        <br />
        <br />
        <dt>
            Features and characteristics
        </dt>

        <dd>

            @if (Model.ABS == true)
            {
                @:ABS,
            }
            @if (Model.Airbag == true)
            {
                @:Airbag,
            }
            @if (Model.Climatronic == true)
            {
                @:Climatronic,
            }
            @if (Model.Climatic == true)
            {
                @:Climatic,
            }
            @if (Model.Insurance == true)
            {
                @:Insurance,
            }
            @if (Model.Leather == true)
            {
                @:Leather,
            }
            @if (Model.ElWindows == true)
            {
                @:El.Windows,
            }
            @if (Model.Typetronic == true)
            {
                @:Typetronic,
            }
            @if (Model.ElSeats == true)
            {
                @:El.Seats,
            }
            @if (Model.SeatsHeat == true)
            {
                @:Seats Heat,
            }
            @if (Model.Autopilot == true)
            {
                @:Autopilot,
            }
            @if (Model.Audio == true)
            {
                @:Audio,
            }
            @if (Model.Retro == true)
            {
                @:Retro,
            }
            @if (Model.TAXI == true)
            {
                @:TAXI,
            }
            @if (Model.AllowWeels == true)
            {
                @:AllowWeels,
            }
            @if (Model.DVDTV == true)
            {
                @:DVD TV,
            }
            @if (Model.Computer == true)
            {
                @:Computer,
            }
            @if (Model.FourByFour == true)
            {
                @:FourByFour,
            }
            @if (Model.ServiceHistory == true)
            {
                @:ServiceHistory,
            }
            @if (Model.ESP == true)
            {
                @:ESP,
            }
            @if (Model.Tunning == true)
            {
                @:Tunning,
            }
            @if (Model.HallogenLights == true)
            {
                @:HallogenLights,
            }
            @if (Model.NavigationSystem == true)
            {
                @:Navigation System,
            }
            @if (Model.ElMirrors == true)
            {
                @:El Mirrors,
            }
            @if (Model.SevenSeats == true)
            {
                @:Seven Seats,
            }
            @if (Model.ASRTractionControl == true)
            {
                @:ASR Traction Control,
            }
            @if (Model.BrandNew == true)
            {
                @:Brand New,
            }
            @if (Model.Parktronic == true)
            {
                @:Parktronic,
            }
            @if (Model.Alarm == true)
            {
                @:Alarm,
            }
            @if (Model.SecondHand == true)
            {
                if (Model.CentralLocking == false && Model.Damaged == false && Model.Imobilazer == false)
                {
                    @:Second Hand
                }
                else
                {
                    @:Second Hand,
                }
            }
            @if (Model.Imobilazer == true)
            {
                if (Model.CentralLocking == false && Model.Damaged == false)
                {
                    @:Imobilazer
                }
                else
                {
                    @:Imobilazer,
                }
            }
            @if (Model.CentralLocking == true)
            {
                if (Model.Damaged == false)
                {
                    @:Central Locking
                }
                else
                {
                    @:Central Locking,
                }
            }
            @if (Model.Damaged == true)
            {
                @:Dameged
            }
        </dd>
        <br />
        <dt>
            Aditional information
        </dt>

        <dd>
            @Html.DisplayFor(model => model.CarDescription)
        </dd>
        <br />

        <span style="float:left; width:375px">
            <dt>
                Published on
            </dt>

            <dd>@Html.DisplayFor(model => model.Date)</dd>
        </span>

        <span style="float:left; width:375px;margin-left:45px ">
            <dt>
                Last edit
            </dt>
            <dd>@Html.DisplayFor(model => model.EditedDate)</dd>
        </span>

        <span style="float:left; width:300px;margin-left:45px  ">
            <dt>
                Total views
            </dt>
            <dd>@Html.DisplayFor(model => model.CarViews)</dd>
        </span>

        <br />
            <br>
            <b><u>Contact Information:</u></b>
            <br>

            <dt>
                Name
            </dt>
            <dd>
                @foreach (var i in ViewBag.userInfo)
            {
                    @i.Author.FullName
                }
            </dd>
            <dt>
                Username
            </dt>
            <dd>
                @foreach (var i in ViewBag.userInfo)
            {
                    @i.Author.UserName
                }
            </dd>
            <dt>
                Telephone Number
            </dt>
            <dd>
                @foreach (var i in ViewBag.userInfo)
            {
                    @i.Author.PhoneNumber
                }
            </dd>

            <dt>
                Email
            </dt>
            <dd>
                @foreach (var i in ViewBag.userInfo)
            {
                    @i.Author.Email
                }
            </dd>
            <dd style="font-weight: 700">
                @Html.ActionLink("Send message to seller", "Create", "Messages",
         new
         {
             ToUser = Model.Author_UserName,

         }, null
         )
            </dd>

</dl>
</div>
<p>
    @if (User.IsInRole("Admin") || User.Identity.GetUserId() == Model.AuthorId)
    {
        @Html.ActionLink("Edit", "Edit", new { id = Model.Id }, new { @class = "btn btn-primary btn-large" }) @:|
        @Html.ActionLink("Delete", "Delete", new { id = Model.Id }, new { @class = "btn btn-primary btn-large" }) @:|
    }
    <input type="button" value="Go Back" onclick="history.go(-1);return false;" class="btn btn-primary btn-large" style="border-color:blue">
</p>
